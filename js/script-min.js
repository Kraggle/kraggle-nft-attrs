const t=jQuery;let n=!1;t((()=>{t(document).on("visibilitychange",(()=>{n=document.hidden}));const a={};t.each(kna.attrs,((n,s)=>{s.attr=n,t(`.kna-detail.${n}`).data("attr",s),setTimeout((()=>{a[n]=setInterval(e,i(1e4,2e4),s)}),i(1e4))})),t(".kna-btn.pause").on("click",(function(){const n=t(".hidden",this);n.siblings("svg").addClass("hidden"),n.removeClass("hidden")})),t(".kna-container").closest(".et_pb_section").css("overflow","hidden"),t(".kna-skip").on("click",(function(){e(t(this).closest(".kna-detail").data("attr"),!0,t(this).hasClass("next"))}))}));const e=(e,a,s)=>{const r=e.attr;if(!a&&(n||t(`.kna-btn.${r} .svg-pause.hidden`).length))return;const o=t(`.kna-detail.${r}`),l=parseInt(t(".kna-count num",o).html())-1,c=e.items.length-1;let h=l;if(a)s?(h++,h=h>c?0:h):(h--,h=h<0?c:h);else do{h=i(0,e.items.length-1)}while(h==l);const u=e.items[h],d=t(`.kna-img.${r}`);d.animate({opacity:0,left:"-=500"},300,(()=>{d.attr("src",u.url),d.css({left:"initial",right:"-500px"}),d.animate({opacity:1,right:0,left:0}),t(".kna-count num",o).startSpinwriter({text:h+1}),t(".kna-attr.trait .kna-val",o).startSpinwriter({text:u.trait}),t(".kna-attr.occur .kna-val",o).startSpinwriter({text:u.occurrence}),t(".kna-attr.rarity .kna-val",o).startSpinwriter({text:u.rarity+"%"})}))},i=(t=0,n=100)=>Math.floor(Math.random()*(n-t))+t;t.fn.startSpinwriter=function(t,n){t.css&&this.css(t.css);let e=t.text+"";e=e.split("");const i=t.interval?t.interval:10,s=t.mode?t.mode:0;return a(this,e,i,s,n),this};const a=function(t,n,e,i,a){return 0==i?s(t,n,1,e,a):1==i?function(t,n,e,i){var a=function(t){for(var n=/[a-zA-Z]/,e=/[0-9]/,i=Array(t.length),a=0;a<t.length;a++)n.test(t[a])||e.test(t[a])?isNaN(t[a])?i[a]=t[a]==t[a].toUpperCase()?"A":"a":i[a]=0:i[a]=t[a];return i}(n);o(t,n,a,e,i)}(t,n,e,a):void 0},s=function(t,n,e,i,a){e<n.length+1?r(t,n.slice(0,e).join(""),0,n,e,i,a):a&&a()},r=function(t,n,e,i,a,o,l){if(n.length>0){var c=" abcdefghijklmnopqrstuvwxyz".split(""),h="0123456789".split(""),u=n.substr(0,n.length-1),d=n[n.length-1];/[a-zA-Z]/.test(d)&&c[e].toLowerCase()!=d.toLowerCase()||/[0-9]/.test(d)&&h[e]!==d?(isNaN(parseInt(d))?t.html(u+c[e]):t.html(u+h[e]),setTimeout((function(){r(t,n,e+=1,i,a,o,l)}),o)):(t.html(n),s(t,i,a+=1,o,l))}};function o(t,n,e,i,a){t.html(e.join("")),n.join("")!==e.join("")?setTimeout((function(){e=function(t,n){for(var e=" abcdefghijklmnopqrstuvwxyz".split(""),i="0123456789".split(""),a=/[a-zA-Z]/,s=0;s<n.length;s++)n[s]!=t[s]&&(a.test(n[s])?t[s]==t[s].toUpperCase()?n[s]=e[e.indexOf(n[s].toLowerCase())+1].toUpperCase():n[s]=e[e.indexOf(n[s])+1]:n[s]=i[i.indexOf(n[s])+1]);return n}(n,e),o(t,n,e,i,a)}),i):a&&a()}