const t=jQuery;t((()=>{const e={};t.each(kna.attrs,((i,a)=>{setTimeout((()=>{e[i]=setInterval((()=>{if(t(`.kna-btn.${i} .svg-pause.hidden`).length)return;const e=t(`.kna-detail.${i}`),r=parseInt(t(".kna-count num",e).html())-1;let s;do{s=n(0,a.items.length-1)}while(s==r);const o=a.items[s],l=t(`.kna-img.${i}`);l.animate({opacity:0,left:"-=500"},300,(()=>{l.attr("src",o.url),l.css({left:"initial",right:"-500px"}),l.animate({opacity:1,right:0,left:0}),t(".kna-count num",e).startSpinwriter({text:s+1}),t(".kna-attr.trait .kna-val",e).startSpinwriter({text:o.trait}),t(".kna-attr.occur .kna-val",e).startSpinwriter({text:o.occurrence}),t(".kna-attr.rarity .kna-val",e).startSpinwriter({text:o.rarity+"%"})}))}),n(1e4,2e4))}),n(1e4))})),t(".kna-btn").on("click",(function(){const n=t(".hidden",this);n.siblings("svg").addClass("hidden"),n.removeClass("hidden")}))}));const n=(t=0,n=100)=>Math.floor(Math.random()*(n-t))+t;t.fn.startSpinwriter=function(t,n){t.css&&this.css(t.css);let i=t.text+"";i=i.split("");const a=t.interval?t.interval:10,r=t.mode?t.mode:0;return e(this,i,a,r,n),this};const e=function(t,n,e,a,s){return 0==a?i(t,n,1,e,s):1==a?function(t,n,e,i){var a=function(t){for(var n=/[a-zA-Z]/,e=/[0-9]/,i=Array(t.length),a=0;a<t.length;a++)n.test(t[a])||e.test(t[a])?isNaN(t[a])?i[a]=t[a]==t[a].toUpperCase()?"A":"a":i[a]=0:i[a]=t[a];return i}(n);r(t,n,a,e,i)}(t,n,e,s):void 0},i=function(t,n,e,i,r){e<n.length+1?a(t,n.slice(0,e).join(""),0,n,e,i,r):r&&r()},a=function(t,n,e,r,s,o,l){if(n.length>0){var c=" abcdefghijklmnopqrstuvwxyz".split(""),u="0123456789".split(""),h=n.substr(0,n.length-1),f=n[n.length-1];/[a-zA-Z]/.test(f)&&c[e].toLowerCase()!=f.toLowerCase()||/[0-9]/.test(f)&&u[e]!==f?(isNaN(parseInt(f))?t.html(h+c[e]):t.html(h+u[e]),setTimeout((function(){a(t,n,e+=1,r,s,o,l)}),o)):(t.html(n),i(t,r,s+=1,o,l))}};function r(t,n,e,i,a){t.html(e.join("")),n.join("")!==e.join("")?setTimeout((function(){e=function(t,n){for(var e=" abcdefghijklmnopqrstuvwxyz".split(""),i="0123456789".split(""),a=/[a-zA-Z]/,r=0;r<n.length;r++)n[r]!=t[r]&&(a.test(n[r])?t[r]==t[r].toUpperCase()?n[r]=e[e.indexOf(n[r].toLowerCase())+1].toUpperCase():n[r]=e[e.indexOf(n[r])+1]:n[r]=i[i.indexOf(n[r])+1]);return n}(n,e),r(t,n,e,i,a)}),i):a&&a()}